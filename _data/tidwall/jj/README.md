"<p align=\"center\">\n<img \n    src=\"logo.png\" \n    width=\"108\" height=\"78\" border=\"0\" alt=\"JJ\">\n<br>\nJSON Stream Editor\n</p>\n\nJJ is a command line utility that provides a [fast](#performance) and simple way to retrieve or update values from JSON documents.\nIt's powered by [GJSON](https://github.com/tidwall/gjson) and [SJSON](https://github.com/tidwall/sjson) under the hood. \n\nIt's [fast](#performance) because it avoids parsing irrelevant sections of json, skipping over values that do not apply, and aborts as soon as the target value has been found or updated.\n\nGetting started\n---------------\n\n## Install\n\n### Mac (Homebrew)\n\n```\nbrew install tidwall/jj/jj\n```\n\n### Build\n\n```\nmake\n```\n\nOr [download a pre-built binary](https://github.com/tidwall/jj/releases) for Linux, OSX, Windows, or FreeBSD.\n\n\n### Usage\n\n```\n$ jj -h\n\nusage: jj [-v value] [-purOD] [-i infile] [-o outfile] keypath\n\nexamples: jj keypath                      read value from stdin\n      or: jj -i infile keypath            read value from infile\n      or: jj -v value keypath             edit value\n      or: jj -v value -o outfile keypath  edit value and write to outfile\n\noptions:\n      -v value             Edit JSON key path value\n      -p                   Make json pretty, keypath is optional\n      -u                   Make json ugly, keypath is optional\n      -r                   Use raw values, otherwise types are auto-detected\n      -n                   Do not output color or extra formatting\n      -O                   Performance boost for value updates\n      -D                   Delete the value at the specified key path\n      -l                   Output array values on multiple lines\n      -i infile            Use input file instead of stdin\n      -o outfile           Use output file instead of stdout\n      keypath              JSON key path (like \"name.last\")\n```\n\n\nExamples\n--------\n\n### Getting a value \n\nJJ uses a [path syntax](https://github.com/tidwall/gjson#path-syntax) for finding values. \n\nGet a string:\n```sh\n$ echo '{\"name\":{\"first\":\"Tom\",\"last\":\"Smith\"}}' | jj name.last\nSmith\n```\n\nGet a block of JSON:\n```sh\n$ echo '{\"name\":{\"first\":\"Tom\",\"last\":\"Smith\"}}' | jj name\n{\"first\":\"Tom\",\"last\":\"Smith\"}\n```\n\nTry to get a non-existent key:\n```sh\n$ echo '{\"name\":{\"first\":\"Tom\",\"last\":\"Smith\"}}' | jj name.middle\nnull\n```\n\nGet the raw string value:\n```sh\n$ echo '{\"name\":{\"first\":\"Tom\",\"last\":\"Smith\"}}' | jj -r name.last\n\"Smith\"\n```\n\nGet an array value by index:\n```sh\n$ echo '{\"friends\":[\"Tom\",\"Jane\",\"Carol\"]}' | jj friends.1\nJane\n```\n\n## JSON Lines\n\nThere's support for [JSON Lines](http://jsonlines.org/) using the `..` path prefix.\nWhich when specified, treats the multi-lined document as an array. \n\nFor example:\n\n```\n{\"name\": \"Gilbert\", \"age\": 61}\n{\"name\": \"Alexa\", \"age\": 34}\n{\"name\": \"May\", \"age\": 57}\n```\n\n```\n..#                   >> 4\n..1                   >> {\"name\": \"Alexa\", \"age\": 34}\n..#.name              >> [\"Gilbert\",\"Alexa\",\"May\"]\n..#[name=\"May\"].age   >> 57\n```\n\n### Setting a value\n\nThe [path syntax](https://github.com/tidwall/sjson#path-syntax) for setting values has a couple of tiny differences than for getting values.\n\nThe `-v value` option is auto-detected as a Number, Boolean, Null, or String. \nYou can override the auto-detection and input raw JSON by including the `-r` option.\nThis is useful for raw JSON blocks such as object, arrays, or premarshalled strings.\n\nUpdate a value:\n```sh\n$ echo '{\"name\":{\"first\":\"Tom\",\"last\":\"Smith\"}}' | jj -v Andy name.first\n{\"name\":{\"first\":\"Andy\",\"last\":\"Smith\"}}\n```\n\nSet a new value:\n```sh\n$ echo '{\"name\":{\"first\":\"Tom\",\"last\":\"Smith\"}}' | jj -v 46 age\n{\"age\":46,\"name\":{\"first\":\"Tom\",\"last\":\"Smith\"}}\n```\n\nSet a new nested value:\n```sh\n$ echo '{\"name\":{\"first\":\"Tom\",\"last\":\"Smith\"}}' | jj -v relax task.today\n{\"task\":{\"today\":\"relax\"},\"name\":{\"first\":\"Tom\",\"last\":\"Smith\"}}\n```\n\nReplace an array value by index:\n```sh\n$ echo '{\"friends\":[\"Tom\",\"Jane\",\"Carol\"]}' | jj -v Andy friends.1\n{\"friends\":[\"Tom\",\"Andy\",\"Carol\"]}\n```\n\nAppend an array:\n```sh\n$ echo '{\"friends\":[\"Tom\",\"Jane\",\"Carol\"]}' | jj -v Andy friends.-1\n{\"friends\":[\"Tom\",\"Andy\",\"Carol\",\"Andy\"]}\n```\n\nSet an array value that's past the bounds:\n```sh\n$ echo '{\"friends\":[\"Tom\",\"Jane\",\"Carol\"]}' | jj -v Andy friends.5\n{\"friends\":[\"Tom\",\"Andy\",\"Carol\",null,null,\"Andy\"]}\n```\n\nSet a raw block of JSON:\n```sh\n$ echo '{\"name\":\"Carol\"}' | jj -r -v '[\"Tom\",\"Andy\"]' friends\n{\"friends\":[\"Tom\",\"Andy\"],\"name\":\"Carol\"}\n```\n\nStart new JSON document:\n```sh\n$ echo '' | jj -v 'Sam' name.first\n{\"name\":{\"first\":\"Sam\"}}\n```\n\n### Deleting a value\n\nDelete a value:\n```sh\n$ echo '{\"age\":46,\"name\":{\"first\":\"Tom\",\"last\":\"Smith\"}}' | jj -D age\n{\"name\":{\"first\":\"Tom\",\"last\":\"Smith\"}}\n```\n\nDelete an array value by index:\n```sh\n$ echo '{\"friends\":[\"Andy\",\"Carol\"]}' | jj -D friends.0\n{\"friends\":[\"Carol\"]}\n```\n\nDelete last item in array:\n```sh\n$ echo '{\"friends\":[\"Andy\",\"Carol\"]}' | jj -D friends.-1\n{\"friends\":[\"Andy\"]}\n```\n\n### Optimistically update a value\n\nThe `-O` option can be used when the caller expects that a value at the\nspecified keypath already exists.\n\nUsing this option can speed up an operation by as much as 6x, but\nslow down as much as 20% when the value does not exist.\n\nFor example:\n\n```\necho '{\"name\":{\"first\":\"Tom\",\"last\":\"Smith\"}}' | jj -v Tim -O name.first\n```\n\nThe `-O` tells jj that the `name.first` likely exists so try a fasttrack operation first.\n\n## Pretty printing\n\nThe `-p` flag will make the output json pretty.\n\n```\n$ echo '{\"name\":{\"first\":\"Tom\",\"last\":\"Smith\"}}' | jj -p name\n{\n  \"first\": \"Tom\",\n  \"last\": \"Smith\"\n}\n```\n\nAlso the keypath is optional when the `-p` flag is specified, allowing for the entire json document to be made pretty.\n\n```\n$ echo '{\"name\":{\"first\":\"Tom\",\"last\":\"Smith\"}}' | jj -p\n{\n  \"name\": {\n    \"first\": \"Tom\",\n    \"last\": \"Smith\"\n  }\n}\n```\n\n## Ugly printing\n\nThe `-u` flag will compress the json into the fewest characters possible by squashing newlines and spaces.\n\n\n## Performance\n\nA quick comparison of jj to [jq](https://stedolan.github.io/jq/). The test [json file](https://github.com/tidwall/sf-city-lots-json) is 180MB file of 206,560 city parcels in San Francisco.\n\n*Tested on a 2015 Macbook Pro running jq 1.5 and jj 1.0.0*\n\n#### Get the lot number for the parcel at index 10000\n\njq:\n\n```bash\n$ time cat citylots.json | jq -cM .features[10000].properties.LOT_NUM\n\"091\"\n\nreal    0m5.486s\nuser    0m4.870s\nsys     0m0.686s\n```\n\njj:\n\n```bash\n$ time cat citylots.json | jj -r features.10000.properties.LOT_NUM\n\"091\"\n\nreal    0m0.354s\nuser    0m0.161s\nsys     0m0.321s\n```\n\n#### Update the lot number for the parcel at index 10000\n\njq:\n\n```bash\n$ time cat citylots.json | jq -cM '.features[10000].properties.LOT_NUM=\"12A\"' > /dev/null\n\nreal    0m13.579s\nuser    0m16.484s\nsys     0m1.310s\n```\n\njj:\n\n```bash\n$ time cat citylots.json | jj -O -v 12A features.10000.properties.LOT_NUM > /dev/null\n\nreal    0m0.431s\nuser\t0m0.201s\nsys     0m0.295s\n```\n\n## Contact\nJosh Baker [@tidwall](http://twitter.com/tidwall)\n\n## License\nJJ source code is available under the MIT [License](/LICENSE).\n\n\n\n"
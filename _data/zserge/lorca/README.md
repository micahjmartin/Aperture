"# Lorca\n\n[![Build Status](https://img.shields.io/github/workflow/status/zserge/lorca/CI%20Pipeline)](https://github.com/zserge/lorca)\n[![GoDoc](https://godoc.org/github.com/zserge/lorca?status.svg)](https://godoc.org/github.com/zserge/lorca)\n[![Go Report Card](https://goreportcard.com/badge/github.com/zserge/lorca)](https://goreportcard.com/report/github.com/zserge/lorca)\n\n<div>\n<img align=\"left\" src=\"https://raw.githubusercontent.com/zserge/lorca/master/lorca.png\" alt=\"Lorca\" width=\"128px\" height=\"128px\" />\n<br/>\n<p>\n\tA very small library to build modern HTML5 desktop apps in Go. It uses Chrome\n\tbrowser as a UI layer. Unlike Electron it doesn't bundle Chrome into the app\n\tpackage, but rather reuses the one that is already installed. Lorca\n\testablishes a connection to the browser window and allows calling Go code\n\tfrom the UI and manipulating UI from Go in a seamless manner.\n</p>\n<br/>\n</div>\n\n\n## Features\n\n* Pure Go library (no cgo) with a very simple API\n* Small application size (normally 5-10MB)\n* Best of both worlds - the whole power of HTML/CSS to make your UI look\n\tgood, combined with Go performance and ease of development\n* Expose Go functions/methods and call them from JavaScript\n* Call arbitrary JavaScript code from Go\n* Asynchronous flow between UI and main app in both languages (async/await and Goroutines)\n* Supports loading web UI from the local web server or via data URL\n* Supports embedding all assets into a single binary\n* Supports testing your app with the UI in the headless mode\n* Supports multiple app windows\n* Supports packaging and branding (e.g. custom app icons). Packaging for all\n\tthree OS can be done on a single machine using GOOS and GOARCH variables.\n\nAlso, limitations by design:\n\n* Requires Chrome/Chromium >= 70 to be installed.\n* No control over the Chrome window yet (e.g. you can't remove border, make it\n\ttransparent, control position or size).\n* No window menu (tray menus and native OS dialogs are still possible via\n\t3rd-party libraries)\n\nIf you want to have more control of the browser window - consider using\n[webview](https://github.com/zserge/webview) library with a similar API, so\nmigration would be smooth.\n\n## Example\n\n```go\nui, _ := lorca.New(\"\", \"\", 480, 320)\ndefer ui.Close()\n\n// Bind Go function to be available in JS. Go function may be long-running and\n// blocking - in JS it's represented with a Promise.\nui.Bind(\"add\", func(a, b int) int { return a + b })\n\n// Call JS function from Go. Functions may be asynchronous, i.e. return promises\nn := ui.Eval(`Math.random()`).Float()\nfmt.Println(n)\n\n// Call JS that calls Go and so on and so on...\nm := ui.Eval(`add(2, 3)`).Int()\nfmt.Println(m)\n\n// Wait for the browser window to be closed\n<-ui.Done()\n```\n\n<p align=\"center\"><img src=\"examples/counter/counter.gif\" /></p>\n\nAlso, see [examples](examples) for more details about binding functions, embedding\nassets and packaging binaries.\n\n## Hello World\n\nHere are the steps to run the hello world example.\n\n```\ncd examples/counter\ngo get\ngo run main.go\n```\n\n## How it works\n\nUnder the hood Lorca uses [Chrome DevTools Protocol](https://chromedevtools.github.io/devtools-protocol/) to instrument on a Chrome instance. First Lorca tries to locate your installed Chrome, starts a remote debugging instance binding to an ephemeral port and reads from `stderr` for the actual WebSocket endpoint. Then Lorca opens a new client connection to the WebSocket server, and instruments Chrome by sending JSON messages of Chrome DevTools Protocol methods via WebSocket. JavaScript functions are evaluated in Chrome, while Go functions actually run in Go runtime and returned values are sent to Chrome.\n\n## What's in a name?\n\n> There is kind of a legend, that before his execution Garcia Lorca have seen a\n> sunrise over the heads of the soldiers and he said \"And yet, the sun rises...\".\n> Probably it was the beginning of a poem. (J. Brodsky)\n\nLorca is an anagram of [Carlo](https://github.com/GoogleChromeLabs/carlo/), a\nproject with a similar goal for Node.js.\n\n## License\n\nCode is distributed under MIT license, feel free to use it in your proprietary\nprojects as well.\n\n"